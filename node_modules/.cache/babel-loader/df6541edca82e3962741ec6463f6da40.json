{"ast":null,"code":"'use strict';\n\nconst EventEmitter = require('events');\n\nconst urlLib = require('url');\n\nconst normalizeUrl = require('normalize-url');\n\nconst getStream = require('get-stream');\n\nconst CachePolicy = require('http-cache-semantics');\n\nconst Response = require('responselike');\n\nconst lowercaseKeys = require('lowercase-keys');\n\nconst cloneResponse = require('clone-response');\n\nconst Keyv = require('keyv');\n\nclass CacheableRequest {\n  constructor(request, cacheAdapter) {\n    if (typeof request !== 'function') {\n      throw new TypeError('Parameter `request` must be a function');\n    }\n\n    this.cache = new Keyv({\n      uri: typeof cacheAdapter === 'string' && cacheAdapter,\n      store: typeof cacheAdapter !== 'string' && cacheAdapter,\n      namespace: 'cacheable-request'\n    });\n    return this.createCacheableRequest(request);\n  }\n\n  createCacheableRequest(request) {\n    return (opts, cb) => {\n      let url;\n\n      if (typeof opts === 'string') {\n        url = normalizeUrlObject(urlLib.parse(opts));\n        opts = {};\n      } else if (opts instanceof urlLib.URL) {\n        url = normalizeUrlObject(urlLib.parse(opts.toString()));\n        opts = {};\n      } else {\n        const [pathname, ...searchParts] = (opts.path || '').split('?');\n        const search = searchParts.length > 0 ? `?${searchParts.join('?')}` : '';\n        url = normalizeUrlObject({ ...opts,\n          pathname,\n          search\n        });\n      }\n\n      opts = {\n        headers: {},\n        method: 'GET',\n        cache: true,\n        strictTtl: false,\n        automaticFailover: false,\n        ...opts,\n        ...urlObjectToRequestOptions(url)\n      };\n      opts.headers = lowercaseKeys(opts.headers);\n      const ee = new EventEmitter();\n      const normalizedUrlString = normalizeUrl(urlLib.format(url), {\n        stripWWW: false,\n        removeTrailingSlash: false,\n        stripAuthentication: false\n      });\n      const key = `${opts.method}:${normalizedUrlString}`;\n      let revalidate = false;\n      let madeRequest = false;\n\n      const makeRequest = opts => {\n        madeRequest = true;\n        let requestErrored = false;\n        let requestErrorCallback;\n        const requestErrorPromise = new Promise(resolve => {\n          requestErrorCallback = () => {\n            if (!requestErrored) {\n              requestErrored = true;\n              resolve();\n            }\n          };\n        });\n\n        const handler = response => {\n          if (revalidate && !opts.forceRefresh) {\n            response.status = response.statusCode;\n            const revalidatedPolicy = CachePolicy.fromObject(revalidate.cachePolicy).revalidatedPolicy(opts, response);\n\n            if (!revalidatedPolicy.modified) {\n              const headers = revalidatedPolicy.policy.responseHeaders();\n              response = new Response(revalidate.statusCode, headers, revalidate.body, revalidate.url);\n              response.cachePolicy = revalidatedPolicy.policy;\n              response.fromCache = true;\n            }\n          }\n\n          if (!response.fromCache) {\n            response.cachePolicy = new CachePolicy(opts, response, opts);\n            response.fromCache = false;\n          }\n\n          let clonedResponse;\n\n          if (opts.cache && response.cachePolicy.storable()) {\n            clonedResponse = cloneResponse(response);\n\n            (async () => {\n              try {\n                const bodyPromise = getStream.buffer(response);\n                await Promise.race([requestErrorPromise, new Promise(resolve => response.once('end', resolve))]);\n\n                if (requestErrored) {\n                  return;\n                }\n\n                const body = await bodyPromise;\n                const value = {\n                  cachePolicy: response.cachePolicy.toObject(),\n                  url: response.url,\n                  statusCode: response.fromCache ? revalidate.statusCode : response.statusCode,\n                  body\n                };\n                let ttl = opts.strictTtl ? response.cachePolicy.timeToLive() : undefined;\n\n                if (opts.maxTtl) {\n                  ttl = ttl ? Math.min(ttl, opts.maxTtl) : opts.maxTtl;\n                }\n\n                await this.cache.set(key, value, ttl);\n              } catch (error) {\n                ee.emit('error', new CacheableRequest.CacheError(error));\n              }\n            })();\n          } else if (opts.cache && revalidate) {\n            (async () => {\n              try {\n                await this.cache.delete(key);\n              } catch (error) {\n                ee.emit('error', new CacheableRequest.CacheError(error));\n              }\n            })();\n          }\n\n          ee.emit('response', clonedResponse || response);\n\n          if (typeof cb === 'function') {\n            cb(clonedResponse || response);\n          }\n        };\n\n        try {\n          const req = request(opts, handler);\n          req.once('error', requestErrorCallback);\n          req.once('abort', requestErrorCallback);\n          ee.emit('request', req);\n        } catch (error) {\n          ee.emit('error', new CacheableRequest.RequestError(error));\n        }\n      };\n\n      (async () => {\n        const get = async opts => {\n          await Promise.resolve();\n          const cacheEntry = opts.cache ? await this.cache.get(key) : undefined;\n\n          if (typeof cacheEntry === 'undefined') {\n            return makeRequest(opts);\n          }\n\n          const policy = CachePolicy.fromObject(cacheEntry.cachePolicy);\n\n          if (policy.satisfiesWithoutRevalidation(opts) && !opts.forceRefresh) {\n            const headers = policy.responseHeaders();\n            const response = new Response(cacheEntry.statusCode, headers, cacheEntry.body, cacheEntry.url);\n            response.cachePolicy = policy;\n            response.fromCache = true;\n            ee.emit('response', response);\n\n            if (typeof cb === 'function') {\n              cb(response);\n            }\n          } else {\n            revalidate = cacheEntry;\n            opts.headers = policy.revalidationHeaders(opts);\n            makeRequest(opts);\n          }\n        };\n\n        const errorHandler = error => ee.emit('error', new CacheableRequest.CacheError(error));\n\n        this.cache.once('error', errorHandler);\n        ee.on('response', () => this.cache.removeListener('error', errorHandler));\n\n        try {\n          await get(opts);\n        } catch (error) {\n          if (opts.automaticFailover && !madeRequest) {\n            makeRequest(opts);\n          }\n\n          ee.emit('error', new CacheableRequest.CacheError(error));\n        }\n      })();\n\n      return ee;\n    };\n  }\n\n}\n\nfunction urlObjectToRequestOptions(url) {\n  const options = { ...url\n  };\n  options.path = `${url.pathname || '/'}${url.search || ''}`;\n  delete options.pathname;\n  delete options.search;\n  return options;\n}\n\nfunction normalizeUrlObject(url) {\n  // If url was parsed by url.parse or new URL:\n  // - hostname will be set\n  // - host will be hostname[:port]\n  // - port will be set if it was explicit in the parsed string\n  // Otherwise, url was from request options:\n  // - hostname or host may be set\n  // - host shall not have port encoded\n  return {\n    protocol: url.protocol,\n    auth: url.auth,\n    hostname: url.hostname || url.host || 'localhost',\n    port: url.port,\n    pathname: url.pathname,\n    search: url.search\n  };\n}\n\nCacheableRequest.RequestError = class extends Error {\n  constructor(error) {\n    super(error.message);\n    this.name = 'RequestError';\n    Object.assign(this, error);\n  }\n\n};\nCacheableRequest.CacheError = class extends Error {\n  constructor(error) {\n    super(error.message);\n    this.name = 'CacheError';\n    Object.assign(this, error);\n  }\n\n};\nmodule.exports = CacheableRequest;","map":{"version":3,"names":["EventEmitter","require","urlLib","normalizeUrl","getStream","CachePolicy","Response","lowercaseKeys","cloneResponse","Keyv","CacheableRequest","constructor","request","cacheAdapter","TypeError","cache","uri","store","namespace","createCacheableRequest","opts","cb","url","normalizeUrlObject","parse","URL","toString","pathname","searchParts","path","split","search","length","join","headers","method","strictTtl","automaticFailover","urlObjectToRequestOptions","ee","normalizedUrlString","format","stripWWW","removeTrailingSlash","stripAuthentication","key","revalidate","madeRequest","makeRequest","requestErrored","requestErrorCallback","requestErrorPromise","Promise","resolve","handler","response","forceRefresh","status","statusCode","revalidatedPolicy","fromObject","cachePolicy","modified","policy","responseHeaders","body","fromCache","clonedResponse","storable","bodyPromise","buffer","race","once","value","toObject","ttl","timeToLive","undefined","maxTtl","Math","min","set","error","emit","CacheError","delete","req","RequestError","get","cacheEntry","satisfiesWithoutRevalidation","revalidationHeaders","errorHandler","on","removeListener","options","protocol","auth","hostname","host","port","Error","message","name","Object","assign","module","exports"],"sources":["C:/Users/hamzu/Desktop/React/React projects/react-store/node_modules/cacheable-request/src/index.js"],"sourcesContent":["'use strict';\n\nconst EventEmitter = require('events');\nconst urlLib = require('url');\nconst normalizeUrl = require('normalize-url');\nconst getStream = require('get-stream');\nconst CachePolicy = require('http-cache-semantics');\nconst Response = require('responselike');\nconst lowercaseKeys = require('lowercase-keys');\nconst cloneResponse = require('clone-response');\nconst Keyv = require('keyv');\n\nclass CacheableRequest {\n\tconstructor(request, cacheAdapter) {\n\t\tif (typeof request !== 'function') {\n\t\t\tthrow new TypeError('Parameter `request` must be a function');\n\t\t}\n\n\t\tthis.cache = new Keyv({\n\t\t\turi: typeof cacheAdapter === 'string' && cacheAdapter,\n\t\t\tstore: typeof cacheAdapter !== 'string' && cacheAdapter,\n\t\t\tnamespace: 'cacheable-request'\n\t\t});\n\n\t\treturn this.createCacheableRequest(request);\n\t}\n\n\tcreateCacheableRequest(request) {\n\t\treturn (opts, cb) => {\n\t\t\tlet url;\n\t\t\tif (typeof opts === 'string') {\n\t\t\t\turl = normalizeUrlObject(urlLib.parse(opts));\n\t\t\t\topts = {};\n\t\t\t} else if (opts instanceof urlLib.URL) {\n\t\t\t\turl = normalizeUrlObject(urlLib.parse(opts.toString()));\n\t\t\t\topts = {};\n\t\t\t} else {\n\t\t\t\tconst [pathname, ...searchParts] = (opts.path || '').split('?');\n\t\t\t\tconst search = searchParts.length > 0 ?\n\t\t\t\t\t`?${searchParts.join('?')}` :\n\t\t\t\t\t'';\n\t\t\t\turl = normalizeUrlObject({ ...opts, pathname, search });\n\t\t\t}\n\n\t\t\topts = {\n\t\t\t\theaders: {},\n\t\t\t\tmethod: 'GET',\n\t\t\t\tcache: true,\n\t\t\t\tstrictTtl: false,\n\t\t\t\tautomaticFailover: false,\n\t\t\t\t...opts,\n\t\t\t\t...urlObjectToRequestOptions(url)\n\t\t\t};\n\t\t\topts.headers = lowercaseKeys(opts.headers);\n\n\t\t\tconst ee = new EventEmitter();\n\t\t\tconst normalizedUrlString = normalizeUrl(\n\t\t\t\turlLib.format(url),\n\t\t\t\t{\n\t\t\t\t\tstripWWW: false,\n\t\t\t\t\tremoveTrailingSlash: false,\n\t\t\t\t\tstripAuthentication: false\n\t\t\t\t}\n\t\t\t);\n\t\t\tconst key = `${opts.method}:${normalizedUrlString}`;\n\t\t\tlet revalidate = false;\n\t\t\tlet madeRequest = false;\n\n\t\t\tconst makeRequest = opts => {\n\t\t\t\tmadeRequest = true;\n\t\t\t\tlet requestErrored = false;\n\t\t\t\tlet requestErrorCallback;\n\n\t\t\t\tconst requestErrorPromise = new Promise(resolve => {\n\t\t\t\t\trequestErrorCallback = () => {\n\t\t\t\t\t\tif (!requestErrored) {\n\t\t\t\t\t\t\trequestErrored = true;\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t\tconst handler = response => {\n\t\t\t\t\tif (revalidate && !opts.forceRefresh) {\n\t\t\t\t\t\tresponse.status = response.statusCode;\n\t\t\t\t\t\tconst revalidatedPolicy = CachePolicy.fromObject(revalidate.cachePolicy).revalidatedPolicy(opts, response);\n\t\t\t\t\t\tif (!revalidatedPolicy.modified) {\n\t\t\t\t\t\t\tconst headers = revalidatedPolicy.policy.responseHeaders();\n\t\t\t\t\t\t\tresponse = new Response(revalidate.statusCode, headers, revalidate.body, revalidate.url);\n\t\t\t\t\t\t\tresponse.cachePolicy = revalidatedPolicy.policy;\n\t\t\t\t\t\t\tresponse.fromCache = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!response.fromCache) {\n\t\t\t\t\t\tresponse.cachePolicy = new CachePolicy(opts, response, opts);\n\t\t\t\t\t\tresponse.fromCache = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet clonedResponse;\n\t\t\t\t\tif (opts.cache && response.cachePolicy.storable()) {\n\t\t\t\t\t\tclonedResponse = cloneResponse(response);\n\n\t\t\t\t\t\t(async () => {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst bodyPromise = getStream.buffer(response);\n\n\t\t\t\t\t\t\t\tawait Promise.race([\n\t\t\t\t\t\t\t\t\trequestErrorPromise,\n\t\t\t\t\t\t\t\t\tnew Promise(resolve => response.once('end', resolve))\n\t\t\t\t\t\t\t\t]);\n\n\t\t\t\t\t\t\t\tif (requestErrored) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst body = await bodyPromise;\n\n\t\t\t\t\t\t\t\tconst value = {\n\t\t\t\t\t\t\t\t\tcachePolicy: response.cachePolicy.toObject(),\n\t\t\t\t\t\t\t\t\turl: response.url,\n\t\t\t\t\t\t\t\t\tstatusCode: response.fromCache ? revalidate.statusCode : response.statusCode,\n\t\t\t\t\t\t\t\t\tbody\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tlet ttl = opts.strictTtl ? response.cachePolicy.timeToLive() : undefined;\n\t\t\t\t\t\t\t\tif (opts.maxTtl) {\n\t\t\t\t\t\t\t\t\tttl = ttl ? Math.min(ttl, opts.maxTtl) : opts.maxTtl;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tawait this.cache.set(key, value, ttl);\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tee.emit('error', new CacheableRequest.CacheError(error));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})();\n\t\t\t\t\t} else if (opts.cache && revalidate) {\n\t\t\t\t\t\t(async () => {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait this.cache.delete(key);\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tee.emit('error', new CacheableRequest.CacheError(error));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})();\n\t\t\t\t\t}\n\n\t\t\t\t\tee.emit('response', clonedResponse || response);\n\t\t\t\t\tif (typeof cb === 'function') {\n\t\t\t\t\t\tcb(clonedResponse || response);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\ttry {\n\t\t\t\t\tconst req = request(opts, handler);\n\t\t\t\t\treq.once('error', requestErrorCallback);\n\t\t\t\t\treq.once('abort', requestErrorCallback);\n\t\t\t\t\tee.emit('request', req);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tee.emit('error', new CacheableRequest.RequestError(error));\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t(async () => {\n\t\t\t\tconst get = async opts => {\n\t\t\t\t\tawait Promise.resolve();\n\n\t\t\t\t\tconst cacheEntry = opts.cache ? await this.cache.get(key) : undefined;\n\t\t\t\t\tif (typeof cacheEntry === 'undefined') {\n\t\t\t\t\t\treturn makeRequest(opts);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst policy = CachePolicy.fromObject(cacheEntry.cachePolicy);\n\t\t\t\t\tif (policy.satisfiesWithoutRevalidation(opts) && !opts.forceRefresh) {\n\t\t\t\t\t\tconst headers = policy.responseHeaders();\n\t\t\t\t\t\tconst response = new Response(cacheEntry.statusCode, headers, cacheEntry.body, cacheEntry.url);\n\t\t\t\t\t\tresponse.cachePolicy = policy;\n\t\t\t\t\t\tresponse.fromCache = true;\n\n\t\t\t\t\t\tee.emit('response', response);\n\t\t\t\t\t\tif (typeof cb === 'function') {\n\t\t\t\t\t\t\tcb(response);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\trevalidate = cacheEntry;\n\t\t\t\t\t\topts.headers = policy.revalidationHeaders(opts);\n\t\t\t\t\t\tmakeRequest(opts);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tconst errorHandler = error => ee.emit('error', new CacheableRequest.CacheError(error));\n\t\t\t\tthis.cache.once('error', errorHandler);\n\t\t\t\tee.on('response', () => this.cache.removeListener('error', errorHandler));\n\n\t\t\t\ttry {\n\t\t\t\t\tawait get(opts);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (opts.automaticFailover && !madeRequest) {\n\t\t\t\t\t\tmakeRequest(opts);\n\t\t\t\t\t}\n\n\t\t\t\t\tee.emit('error', new CacheableRequest.CacheError(error));\n\t\t\t\t}\n\t\t\t})();\n\n\t\t\treturn ee;\n\t\t};\n\t}\n}\n\nfunction urlObjectToRequestOptions(url) {\n\tconst options = { ...url };\n\toptions.path = `${url.pathname || '/'}${url.search || ''}`;\n\tdelete options.pathname;\n\tdelete options.search;\n\treturn options;\n}\n\nfunction normalizeUrlObject(url) {\n\t// If url was parsed by url.parse or new URL:\n\t// - hostname will be set\n\t// - host will be hostname[:port]\n\t// - port will be set if it was explicit in the parsed string\n\t// Otherwise, url was from request options:\n\t// - hostname or host may be set\n\t// - host shall not have port encoded\n\treturn {\n\t\tprotocol: url.protocol,\n\t\tauth: url.auth,\n\t\thostname: url.hostname || url.host || 'localhost',\n\t\tport: url.port,\n\t\tpathname: url.pathname,\n\t\tsearch: url.search\n\t};\n}\n\nCacheableRequest.RequestError = class extends Error {\n\tconstructor(error) {\n\t\tsuper(error.message);\n\t\tthis.name = 'RequestError';\n\t\tObject.assign(this, error);\n\t}\n};\n\nCacheableRequest.CacheError = class extends Error {\n\tconstructor(error) {\n\t\tsuper(error.message);\n\t\tthis.name = 'CacheError';\n\t\tObject.assign(this, error);\n\t}\n};\n\nmodule.exports = CacheableRequest;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}